{% extends "users/base.html" %} {% block body %}
<h1 class='text-center'> This is the admin dashboard!</h1>
<div class="container-fluid text-center main-body">
    <div class="row content text-center">

        <div class="col-sm-3">
            <div class="well">
                <img src="https://avatars.io/avatar/HASH/size" class="img-circle" height="65" width="65" alt="Avatar">
                <h3 class="semi-bold-black">{{ user.first_name }} {{ user.last_name }}</h3>
                <h4 class="semi-bold-black"> {{ user.role }} </h4>
                <p class="font-lightitalic">@{{ user.username }}</p>

            </div>
        </div>
        <div class="col-sm-9">
            <div class="dash-header-admin text-left">
                <h5> Actions </h5>
            </div>
            <div class="dash-body-admin text-left">
                <a href="{{ url_for('users.nearme', user=current_user.username) }}" class="btn btn-actions"> Outbreaks Near Me </a>

            </div>


        </div>
    </div>
</div>
<script>
    window.onload = function() {
  getLocation();
};
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(savePosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }
    function savePosition(position) {
        var latitude = position.coords.latitude 
        var longitude = position.coords.longitude; 

        var position = 
        {
            'latitude' : latitude, 
            'longitude' : longitude
        }
        var url = "/dashboard/" + "{{current_user.username|safe}}"
        $.ajax({
        url: url,
        type: 'POST',
        data: JSON.stringify(position),   // converts js value to JSON string
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        async: false,
        }).done(function(result){ console.log(result) })
       
        }

     </script>
{% endblock %}